front X
  inter: frozen
  prereq: !st_frozen_melted

outhouse_outside X
  inter: frozen
  prereq: !st_frozen_melted
  effect on item(saucepan_hot): st_frozen_melted && sound(melt)

  exit: outhouse
  prereq: st_frozen_melted

outhouse X
  inter: shovel
  prereq: !st_shovel_taken
  effect on use: st_shovel_taken && inventory_add(shovel)

crawlspace_outside X
  inter: hatch
  prereq: !st_hatch_open
  effect on use: st_hatch_open

  inter: hatch_open
  prereq: st_hatch_open

  exit: crawlspace
  prereq: st_hatch_open
 
back X
  exit: horror
  prereq: st_window_open && !st_handle_taken

crawlspace X
  inter: pipes
  prereq: st_illuminated && !st_water
  effect on item(wrench): st_water && sound(crank)
  
  inter: pipes_fixed
  prereq: st_illuminated && st_water

  inter: darkness
  prereq: !st_illuminated
  effect on item(flashlight): st_illuminated

  background: crawlspace_illuminated
  prereq: st_illuminated

entrance X
  exit: hall
  prereq: st_maindoor_open
  effect on go: sound(door)

  inter: door
  prereq: !st_maindoor_open
  effect on item(mainkey): st_maindoor_open && sound(lock)

  inter: doormat
  prereq: !st_doormat_moved
  effect on use: st_doormat_moved

  inter: doormat_moved
  prereq: st_doormat_moved

  inter: mainkey
  prereq: st_doormat_moved && !st_mainkey_taken
  effect on use: st_mainkey_taken && inventory_add(mainkey)

hall X
  exit: typewriterroom
  prereq: st_typewriterroom_open
  effect on go: sound(door)
  
  inter: door_maps
  effect on item(handle): exit(maps)

  inter: door_typewriterroom
  prereq: !st_typewriterroom_open
  effect on item(typewriterkey): st_typewriterroom_open && sound(lock)

  exit: view
  effect on go: st_window_open

shower X
  -

fusebox X
  inter: fusebox
  prereq: !st_fuse_inserted
  effect on item(fuse): st_fuse_inserted

  inter: fuse
  prereq: st_fuse_inserted

  inter: postcard
  effect on use: exit(postcard)

toilet X
  inter: paper
  effect on use: exit(paper)

  inter: wrench
  prereq: !st_wrench_taken
  effect on use: st_wrench_taken && inventory_add(wrench)

livingroom X
  inter: saucepan
  prereq: !st_saucepan_taken

  inter: diary
  effect on use: exit(diary)

drawers X
  inter: drawer
  prereq: !st_drawer_open
  effect on use: st_drawer_open

  inter: drawer_open
  prereq: st_drawer_open
  effect on use: !st_drawer_open

  background: drawer_open
  prereq: st_drawer_open

  inter: fuse
  prereq: st_drawer_open && !st_fuse_taken
  effect on use: st_fuse_taken && inventory_add(fuse)

phone X
  inter: phone
  effect on use: exit(phone_picked)

phone_picked X
  TODO: Very special indeed yes

mrtn X
  inter: saucepan
  prereq: !st_saucepan_taken
  effect on use: st_saucepan_taken && inventory_add(saucepan)

bookcase X
  inter: door
  prereq: !st_toyroom_open
  effect on item(toykey): st_toyroom_open && sound(lock)

  exit: toyroom
  prereq: st_toyroom_open

toyroom X
  -

keyboard X
  volume lower!

  inter: 1
  effect on use: sound(1)

  inter: 2
  effect on use: sound(2)

  inter: 3
  effect on use: sound(3)

  inter: 4
  effect on use: sound(4)

  inter: 5
  effect on use: sound(5)

  inter: 6
  effect on use: sound(6)

  inter: 7
  effect on use: sound(7)

  inter: 8
  effect on use: sound(8)

kitchen X
  -

kitchen_left X
  -

microwave X
  inter: microwave
  prereq: !st_microwave_open
  effect: st_microwave_open

  background: microwave_open
  prereq: st_microwave_open

  inter: typewriterkey
  prereq: st_microwave_open && !st_typewriterkey_taken
  effect: st_typewriterkey_taken && inventory_add(typewriterkey)

  exit: kitchen_left
  prereq: !st_microwave_open

kitchen_right X
  inter: tap
  prereq: !st_water

  inter: stove
  prereq: !st_fuse_inserted

  inter: tap_fixed
  prereq: st_water
  effect on item(saucepan): inventory_remove(saucepan)
                            && inventory_add(saucepan_water)
                            && sound(water)

  inter: stove_fixed
  prereq: st_fuse_inserted
  effect on item(saucepan_water): inventory_remove(saucepan_water)
                                  && inventory_add(saucepan_hot)
                                  && sound(boil)

typewriterroom X
  inter: notebook
  prereq: !st_notebook_taken
  effect: st_notebook_taken && inventory_add(notebook)

  exit: hall
  effect on go: sound(door_close)

typewriter X
  inter: toykey
  prereq: !st_toykey_taken
  effect: st_toykey_taken && inventory_add(toykey)

underwear X
  -

maps X
  inter: map
  effect on item(notebook): inventory_remove(notebook) 
                            && inventory_add(notebook_drawn)
                            && sound(draw)
  
view X
  inter: frozen
  prereq: !st_frozen_melted

horror X
  inter: handle
  prereq: !st_handle_taken
  effect: st_handle_taken && inventory_add(handle)

  exit: back
  prereq: st_handle_taken

car_outside X
  -

car /
  inter: flashlight
  prereq: !st_flashlight_taken
  effect: st_flashlight_taken && inventory_add(flashlight)

  inter: radio
  effect: song(radio)

walk_down
  TODO: Very special yes

walk_up
  TODO: Very special yes

beach_panorama
  TODO: Very special yes

beach
  inter: treasure_hunt
  effect on item(notebook_drawn): exit(walk_treasure)

walk_down_treasure
  TODO: Very special yes

walk_up_treasure
  TODO: Very special yes

treasure
  inter: cross
  prereq: !st_dug
  effect on item(shovel): st_dug

  inter: musicbox
  prereq: st_dug && !st_musicbox_taken
  effect on use: st_musicbox_taken && inventory_add(musicbox)

  background: treasure_dug
  prereq: st_dug
